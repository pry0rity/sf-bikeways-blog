(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3851:function(e,t,s){Promise.resolve().then(s.bind(s,6117))},6117:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),l=s(2265);let n="expense-tracker-data",r="expense-tracker-settlements";function i(e){try{let t=localStorage.getItem(e);return t?JSON.parse(t):[]}catch(e){return[]}}function c(e,t){localStorage.setItem(e,JSON.stringify(t))}function d(){let[e,t]=(0,l.useState)([]),[s,d]=(0,l.useState)([]),[o,x]=(0,l.useState)("Will"),[m,u]=(0,l.useState)(""),[p,g]=(0,l.useState)(!1),[h,b]=(0,l.useState)(!1),[f,y]=(0,l.useState)(null),N=(0,l.useRef)(null);function j(e){let t=e.trim().match(/^(.+?)\s+\$?([\d]+(?:\.[\d]{0,2})?)$/);if(!t)return null;let s=t[1].trim(),a=parseFloat(t[2]);return!s||isNaN(a)||a<=0?null:{description:s,amount:a}}(0,l.useEffect)(()=>{var e;t(i(n)),d(i(r)),g(!0),null===(e=N.current)||void 0===e||e.focus()},[]),(0,l.useEffect)(()=>{p&&c(n,e)},[e,p]),(0,l.useEffect)(()=>{p&&c(r,s)},[s,p]),(0,l.useEffect)(()=>{function e(e){e.altKey&&"1"===e.key?(e.preventDefault(),x("Will")):e.altKey&&"2"===e.key&&(e.preventDefault(),x("Sam"))}return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let v=j(m),w=null!==v,k=(0,l.useCallback)(function(e){e.preventDefault();let s=j(m);if(!s)return;let a={id:crypto.randomUUID(),paidBy:o,description:s.description,amount:s.amount,createdAt:Date.now()};t(e=>[a,...e]),u(""),b(!0),setTimeout(()=>b(!1),600),setTimeout(()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.focus()},0)},[m,o]),S=e.filter(e=>"Will"===e.paidBy).reduce((e,t)=>e+t.amount,0),W=e.filter(e=>"Sam"===e.paidBy).reduce((e,t)=>e+t.amount,0),D=(S+W)/2-S;return(0,a.jsxs)("main",{className:"max-w-lg mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center mb-8",children:"Expense Tracker"}),(0,a.jsxs)("div",{className:"bg-gray-900 rounded-2xl p-6 mb-6 border border-gray-800",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Will paid"}),(0,a.jsxs)("p",{className:"text-xl font-semibold text-blue-400",children:["$",p?S.toFixed(2):"0.00"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Sam paid"}),(0,a.jsxs)("p",{className:"text-xl font-semibold text-pink-400",children:["$",p?W.toFixed(2):"0.00"]})]})]}),(0,a.jsx)("div",{className:"border-t border-gray-800 pt-4 text-center",children:p&&e.length>0?(0,a.jsxs)(a.Fragment,{children:[D>.01?(0,a.jsxs)("p",{className:"text-lg mb-3",children:["Will owes Sam"," ",(0,a.jsxs)("span",{className:"font-bold text-pink-400",children:["$",D.toFixed(2)]})]}):D<-.01?(0,a.jsxs)("p",{className:"text-lg mb-3",children:["Sam owes Will"," ",(0,a.jsxs)("span",{className:"font-bold text-blue-400",children:["$",Math.abs(D).toFixed(2)]})]}):(0,a.jsx)("p",{className:"text-lg text-green-400 mb-3",children:"All even!"}),(0,a.jsx)("button",{onClick:function(){if(0===e.length)return;let s=e.filter(e=>"Will"===e.paidBy).reduce((e,t)=>e+t.amount,0),a=(s+e.filter(e=>"Sam"===e.paidBy).reduce((e,t)=>e+t.amount,0))/2-s,l=Math.abs(a);if(l<.01){let s={id:crypto.randomUUID(),expenses:[...e],paidTo:"Will",amount:0,settledAt:Date.now()};d(e=>[s,...e]),t([]);return}let n=a>0?"Sam":"Will";if(!confirm("".concat(a>0?"Will":"Sam"," pays ").concat(n," $").concat(l.toFixed(2)," to settle up?")))return;let r={id:crypto.randomUUID(),expenses:[...e],paidTo:n,amount:l,settledAt:Date.now()};d(e=>[r,...e]),t([])},className:"bg-green-600 hover:bg-green-500 text-white font-medium px-6 py-2 rounded-lg transition-colors text-sm",children:"Settle Up"})]}):(0,a.jsx)("p",{className:"text-gray-500",children:"No expenses yet"})})]}),(0,a.jsxs)("form",{onSubmit:k,className:"bg-gray-900 rounded-2xl p-6 mb-6 border transition-colors duration-300 ".concat(h?"border-green-500/60":"border-gray-800"),children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Add Expense"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>x("Will"),className:"flex-1 py-2 rounded-lg font-medium transition-colors ".concat("Will"===o?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Will",(0,a.jsx)("span",{className:"text-xs opacity-50 ml-1",children:"Alt+1"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>x("Sam"),className:"flex-1 py-2 rounded-lg font-medium transition-colors ".concat("Sam"===o?"bg-pink-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Sam",(0,a.jsx)("span",{className:"text-xs opacity-50 ml-1",children:"Alt+2"})]})]}),(0,a.jsx)("input",{ref:N,type:"text",placeholder:"groceries 204.19",value:m,onChange:e=>u(e.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 text-gray-100 placeholder-gray-500 focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/30 text-lg",autoFocus:!0}),(0,a.jsx)("div",{className:"h-6 mt-2 mb-3",children:m.trim()&&(v?(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[(0,a.jsx)("span",{className:"text-gray-300",children:v.description})," — ",(0,a.jsxs)("span",{className:"text-green-400 font-medium",children:["$",v.amount.toFixed(2)]})]}):(0,a.jsx)("p",{className:"text-sm text-gray-600",children:'type description + amount, e.g. "coffee 4.50"'}))}),(0,a.jsx)("button",{type:"submit",disabled:!w,className:"w-full font-medium py-2.5 rounded-lg transition-colors ".concat(w?"bg-indigo-600 hover:bg-indigo-500 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"),children:"Add Expense ↵"})]}),p&&e.length>0&&(0,a.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold",children:["Expenses (",e.length,")"]}),(0,a.jsx)("button",{onClick:function(){confirm("Clear all expenses?")&&t([])},className:"text-sm text-gray-500 hover:text-red-400 transition-colors",children:"Clear all"})]}),(0,a.jsx)("ul",{className:"divide-y divide-gray-800",children:e.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between px-6 py-3 hover:bg-gray-800/50 transition-colors group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0 ".concat("Will"===e.paidBy?"bg-blue-400":"bg-pink-400")}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-sm truncate",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[e.paidBy," \xb7"," ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-shrink-0",children:[(0,a.jsxs)("span",{className:"font-medium ".concat("Will"===e.paidBy?"text-blue-400":"text-pink-400"),children:["$",e.amount.toFixed(2)]}),(0,a.jsx)("button",{onClick:()=>{var s;return s=e.id,void t(e=>e.filter(e=>e.id!==s))},className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all text-lg leading-none",title:"Remove",children:"\xd7"})]})]},e.id))})]}),p&&s.length>0&&(0,a.jsxs)("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden mt-6",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-800",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Settlement History"})}),(0,a.jsx)("ul",{className:"divide-y divide-gray-800",children:s.map(e=>{let t=f===e.id;return(0,a.jsxs)("li",{children:[(0,a.jsxs)("button",{onClick:()=>y(t?null:e.id),className:"w-full px-6 py-4 text-left hover:bg-gray-800/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("p",{className:"text-sm",children:e.amount>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-green-400 font-medium",children:["$",e.amount.toFixed(2)]})," paid to ",(0,a.jsx)("span",{className:"Will"===e.paidTo?"text-blue-400":"text-pink-400",children:e.paidTo})]}):(0,a.jsx)("span",{className:"text-green-400",children:"Settled even"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600",children:new Date(e.settledAt).toLocaleDateString()}),(0,a.jsx)("span",{className:"text-gray-500 text-xs transition-transform ".concat(t?"rotate-180":""),children:"▼"})]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.expenses.length," expense",1!==e.expenses.length&&"s"," \xb7 $",e.expenses.reduce((e,t)=>e+t.amount,0).toFixed(2)," total"]})]}),t&&(0,a.jsx)("div",{className:"border-t border-gray-800/50 bg-gray-950/50",children:(0,a.jsx)("ul",{className:"divide-y divide-gray-800/50",children:e.expenses.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between px-6 py-2.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat("Will"===e.paidBy?"bg-blue-400":"bg-pink-400")}),(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300 truncate",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.paidBy," \xb7"," ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,a.jsxs)("span",{className:"text-sm font-medium flex-shrink-0 ".concat("Will"===e.paidBy?"text-blue-400/70":"text-pink-400/70"),children:["$",e.amount.toFixed(2)]})]},e.id))})})]},e.id)})})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3851)}),_N_E=e.O()}]);