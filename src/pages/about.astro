---
import Layout from "../layouts/Layout.astro";
---

<Layout
  title="About SF Bikeways"
  description="One person's mission to bike every lane in San Francisco."
>
  <div class="max-w-2xl mx-auto space-y-8">
    <h1>About SF Bikeways</h1>

    <p>
      I'm biking every single bike lane in San Francisco. No exceptions, no
      shortcuts.
    </p>

    <p>
      This started as a way to break out of autopilot mode. Instead of chasing
      the next big thing, I'm exploring the city I already love - one lane at a
      time.
    </p>

    <p>
      You'll find photos, stories, and coffee shop stops along the way. No gear
      reviews, no productivity hacks. Just raw documentation of what it's like
      to see San Francisco from every possible angle on two wheels.
    </p>

    <p>
      Want to follow along? I'm documenting the whole thing here. Have a
      favorite lane or coffee shop to recommend? Drop me a line.
    </p>

    <div class="mt-12 p-6 bg-gray-50 rounded-lg">
      <h2 class="text-xl font-semibold mb-4">Get in Touch</h2>
      <form id="contact-form" class="space-y-4">
        <div>
          <label for="email" class="block text-sm font-medium text-gray-700"
            >Email</label
          >
          <input
            type="email"
            id="email"
            name="email"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          />
        </div>
        <div>
          <label for="message" class="block text-sm font-medium text-gray-700"
            >Message</label
          >
          <textarea
            id="message"
            name="message"
            rows="4"
            required
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
          ></textarea>
        </div>
        <button
          type="submit"
          class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
        >
          Send Message
        </button>
      </form>
      <div id="form-status" class="mt-4 hidden"></div>
    </div>
  </div>
</Layout>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const status = document.getElementById("form-status") as HTMLDivElement;

  if (form && status) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(form);

      try {
        const response = await fetch("/api/contact", {
          method: "POST",
          body: formData,
        });

        const result = await response.json();

        if (result.success) {
          status.textContent = "Message sent successfully!";
          status.className = "mt-4 text-green-600";
          form.reset();
        } else {
          throw new Error("Failed to send message");
        }
      } catch (error) {
        status.textContent = "Failed to send message. Please try again.";
        status.className = "mt-4 text-red-600";
      }

      status.classList.remove("hidden");
    });
  }
</script>
